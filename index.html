<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaHunt - AI Lead Hunter</title>
    <meta name="description" content="NovaHunt.ai: AI-powered tool to hunt B2B leads, emails, and suppliers with precision.">
    <meta name="keywords" content="AI lead generation, B2B leads, email hunter, supplier finder">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¥·</text></svg>" type="image/svg+xml">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #F5F7FA; color: #2D3748; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .section { padding: 60px 0; }
        h1 { font-size: 2.8em; font-weight: 800; text-align: center; color: #2D3748; margin-bottom: 15px; }
        h2 { font-size: 2em; font-weight: 700; color: #2D3748; margin-bottom: 20px; text-align: center; }
        p { font-size: 1.1em; color: #4A5568; margin-bottom: 20px; text-align: center; }
        .btn { background: #4C51BF; color: #FFFFFF; padding: 8px 15px; border: none; border-radius: 4px; font-size: 0.9em; cursor: pointer; transition: background 0.3s; text-decoration: none; display: inline-block; }
        .btn:hover { background: #434190; }
        .btn-primary { background: #4C51BF; color: #FFFFFF; font-size: 1.2em; padding: 14px 30px; border-radius: 6px; }
        .search-tabs { display: flex; background: #EDF2F7; border-radius: 6px; overflow: hidden; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 12px; background: transparent; color: #2D3748; border: none; cursor: pointer; font-size: 1em; transition: background 0.3s; }
        .tab-btn.active { background: #4C51BF; color: #FFFFFF; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .results { margin-top: 20px; }
        .result-table { width: 100%; border-collapse: collapse; }
        .result-table th, .result-table td { padding: 12px; text-align: left; border-bottom: 1px solid #E2E8F0; }
        .result-table th { background: #EDF2F7; font-weight: 600; color: #2D3748; cursor: pointer; }
        .result-table th:hover { background: #E2E8F0; }
        .result-table td { background: #FFFFFF; }
        .result-table .premium { color: #718096; font-style: italic; }
        .loading { color: #718096; font-style: italic; text-align: center; }
        .summary-box { background: #FFFFFF; border: 1px solid #E2E8F0; border-radius: 6px; padding: 15px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .department-header { font-size: 1.2em; font-weight: 600; color: #2D3748; margin: 10px 0 5px; }
        .premium-note { font-size: 0.8em; color: #718096; margin-top: 10px; text-align: center; }
        .error { color: #E53E3E; font-size: 0.9em; margin-top: 5px; text-align: center; }
        .filter-group { margin-bottom: 10px; }
        .filter-group select { padding: 8px; border: 1px solid #E2E8F0; border-radius: 4px; }
        .toggle-group { margin-bottom: 10px; text-align: center; }
        .toggle-group label { margin-right: 10px; }
        @media (max-width: 768px) { h1 { font-size: 2em; } h2 { font-size: 1.5em; } .search-tabs { flex-direction: column; } .result-table { display: block; overflow-x: auto; } }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="section" style="padding-top: 80px; background: #FFFFFF; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div class="container">
            <h1>ðŸ¥· NovaHunt</h1>
            <p style="font-size: 1.2em;">AI-Powered Lead Generation That Hunts for You</p>
            <p>Hunt thousands of qualified B2B leads instantly with cutting-edge AI.</p>
            <div style="text-align: center; margin-top: 20px;"><a href="plans.html" class="btn">Start Free Trial</a></div>
            <p style="font-size: 0.9em; color: #718096;">free credits â€¢ No credit card required</p>
        </div>
    </section>

    <!-- Multi-Mode Search Section -->
    <section class="section">
        <div class="container">
            <h2>Search for Leads</h2>
            <p>Choose a mode below to get started.</p>
            <div class="search-tabs">
                <button class="tab-btn active" onclick="switchTab('company', this)">Hunt Corporate Emails</button>
                <button class="tab-btn" onclick="switchTab('ai', this)">Hunt Industry Leads</button>
                <button class="tab-btn" onclick="switchTab('imports', this)">Hunt Import Records</button>
            </div>
            <div id="company-tab" class="tab-content active">
                <p style="text-align: center; opacity: 0.8;">Enter a company name or domain (e.g., coca-cola.com).</p>
                <input type="text" id="companyInput" placeholder="Company or domain..." style="width: 100%; max-width: 400px; margin: 0 auto 10px; display: block; padding: 10px; border: 1px solid #E2E8F0; border-radius: 4px;">
                <div id="companyError" class="error" style="display: none;"></div>
                <button class="btn-primary" onclick="searchCompany()">Find Emails & Contacts</button>
                <div id="companyResults" class="results"></div>
            </div>
            <div id="ai-tab" class="tab-content">
                <p style="text-align: center; opacity: 0.8;">Enter a query like 'Ice Cream Companies USA' for live results.</p>
                <input type="text" id="aiInput" placeholder="AI-powered lead query..." style="width: 100%; max-width: 400px; margin: 0 auto 10px; display: block; padding: 10px; border: 1px solid #E2E8F0; border-radius: 4px;">
                <button class="btn" onclick="searchAI()">Generate Leads</button>
                <div id="aiResults" class="results"></div>
            </div>
            <div id="imports-tab" class="tab-content">
                <p style="text-align: center; opacity: 0.8;">Enter a company name</p>
                <p style="text-align: center; opacity: 0.8; font-weight: 500;">Import Competitors Supplier Records (e.g., acme imports) - ImportYeti integration planned</p>
                <div class="filter-group">
                    <select id="countryFilter">
                        <option value="">All Countries</option>
                        <option value="China">China</option>
                        <option value="Vietnam">Vietnam</option>
                        <option value="USA">USA</option>
                    </select>
                    <select id="yearFilter">
                        <option value="">All Years</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                    </select>
                </div>
                <div class="toggle-group">
                    <label><input type="checkbox" id="liveToggle" checked> Live Data (Trade Map API)</label>
                </div>
                <input type="text" id="importsInput" placeholder="Company for import search..." style="width: 100%; max-width: 400px; margin: 0 auto 10px; display: block; padding: 10px; border: 1px solid #E2E8F0; border-radius: 4px;">
                <button class="btn" onclick="searchImports()">Find Suppliers</button>
                <div id="importsResults" class="results"></div>
            </div>
        </div>
    </section>

    <script>
        // Mock user credits (replace with real auth later)
        let userCredits = 5;

        // Tab switching
        function switchTab(tabName, button) {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');
            tabs.forEach(btn => btn.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            button.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
            console.log(`Switched to ${tabName} tab`);
        }

        // Company Search with Hunter.io API via AllOrigins Proxy
        async function searchCompany() {
            const query = document.getElementById('companyInput').value.trim();
            const results = document.getElementById('companyResults');
            const errorDiv = document.getElementById('companyError');
            errorDiv.style.display = 'none';

            // Validate input format
            if (!query.includes('.com') && !query.includes('.org') && !query.includes('.net')) {
                errorDiv.textContent = 'Incorrect format. Please enter a valid domain (e.g., coca-cola.com).';
                errorDiv.style.display = 'block';
                results.innerHTML = '';
                return;
            }

            results.innerHTML = '<div class="loading">Searching...</div>';
            try {
                const apiKey = 'b2eb114113547c1eeb296f358fb10653acc0727a';
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                const apiUrl = `https://api.hunter.io/v2/domain-search?domain=${encodeURIComponent(query)}&api_key=${apiKey}`;
                const response = await fetch(proxyUrl + encodeURIComponent(apiUrl));
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                if (data.errors) {
                    throw new Error(data.data.errors[0].message);
                }
                // Mock full count based on known data
                const mockTotal = (query === 'coca-cola.com') ? 444 : (query === 'monsterenergy.com' ? 45 : data.data.emails.length);
                results.innerHTML = `<p style="color: #4A5568;">Found ${mockTotal} emails across departments. (Free tier shows 10, upgrade for all)</p>`;

                // Group emails by department
                const emailsByDept = {};
                data.data.emails.slice(0, 10).forEach(email => {
                    const dept = email.department || 'Unknown';
                    if (!emailsByDept[dept]) emailsByDept[dept] = [];
                    emailsByDept[dept].push(email);
                });

                for (const [dept, emails] of Object.entries(emailsByDept)) {
                    results.innerHTML += `<div class="department-header">${dept} (${emails.length})</div>`;
                    emails.forEach(email => {
                        const name = email.first_name || email.last_name ? `${email.first_name || ''} ${email.last_name || ''}`.trim() : 'N/A';
                        const role = email.position || 'N/A';
                        const confidence = email.confidence || 'N/A';
                        const maskedEmail = `********@${query.split('.')[0]}.com`;
                        results.innerHTML += `
                            <div class="result-item">
                                <h3>${name}</h3>
                                <p class="result-desc">Role: ${role}</p>
                                <p class="email">${maskedEmail} <button class="btn" onclick="revealEmail('${email.value}', this, 1)">Reveal (1 Credit)</button> | Confidence: ${confidence}%</p>
                            </div>
                        `;
                    });
                }
                results.innerHTML += `<div class="premium-note"><a href="plans.html" class="btn">Upgrade to Premium</a> for full ${mockTotal} emails.</div>`;
            } catch (err) {
                console.error('API fetch failed:', err);
                results.innerHTML = `<div class="result-item">API Error: ${err.message}. Showing mock data for ${query}...</div>`;
                const mockTotal = (query === 'coca-cola.com') ? 444 : (query === 'monsterenergy.com' ? 45 : 10);
                results.innerHTML += `<p style="color: #4A5568;">Mock data: Found ${mockTotal} emails across departments. (Free tier shows 10)</p>`;
                const mockEmails = [
                    { name: 'Jane Smith', role: 'Marketing Manager', email: 'jane.smith@' + query.split('.')[0] + '.com', dept: 'Marketing', confidence: 80 },
                    { name: 'Mike Johnson', role: 'Sales Director', email: 'mike.johnson@' + query.split('.')[0] + '.com', dept: 'Sales', confidence: 85 },
                    { name: 'Sarah Lee', role: 'HR Specialist', email: 'sarah.lee@' + query.split('.')[0] + '.com', dept: 'Human Resources', confidence: 70 },
                    { name: 'Tom Brown', role: 'IT Lead', email: 'tom.brown@' + query.split('.')[0] + '.com', dept: 'IT', confidence: 75 },
                    { name: 'Emily Davis', role: 'Finance Analyst', email: 'emily.davis@' + query.split('.')[0] + '.com', dept: 'Finance', confidence: 78 },
                    { name: 'David Wilson', role: 'Product Manager', email: 'david.wilson@' + query.split('.')[0] + '.com', dept: 'Product', confidence: 82 },
                    { name: 'Lisa Anderson', role: 'Operations Lead', email: 'lisa.anderson@' + query.split('.')[0] + '.com', dept: 'Operations', confidence: 77 },
                    { name: 'Robert Taylor', role: 'Marketing Assistant', email: 'robert.taylor@' + query.split('.')[0] + '.com', dept: 'Marketing', confidence: 73 },
                    { name: 'Karen White', role: 'Sales Rep', email: 'karen.white@' + query.split('.')[0] + '.com', dept: 'Sales', confidence: 76 },
                    { name: 'John Doe', role: 'CEO', email: 'john.doe@' + query.split('.')[0] + '.com', dept: 'Executive', confidence: 75 }
                ];
                const mockEmailsByDept = {};
                mockEmails.forEach(email => {
                    if (!mockEmailsByDept[email.dept]) mockEmailsByDept[email.dept] = [];
                    mockEmailsByDept[email.dept].push(email);
                });
                for (const [dept, emails] of Object.entries(mockEmailsByDept)) {
                    results.innerHTML += `<div class="department-header">${dept} (${emails.length})</div>`;
                    emails.forEach(email => {
                        const maskedEmail = `********@${query.split('.')[0]}.com`;
                        results.innerHTML += `
                            <div class="result-item">
                                <h3>${email.name}</h3>
                                <p class="result-desc">Role: ${email.role}</p>
                                <p class="email">${maskedEmail} <button class="btn" onclick="revealEmail('${email.email}', this, 1)">Reveal (1 Credit)</button> | Confidence: ${email.confidence}%</p>
                            </div>
                        `;
                    });
                }
                results.innerHTML += `<div class="premium-note"><a href="plans.html" class="btn">Upgrade to Premium</a> for full ${mockTotal} emails.</div>`;
            }
        }

        // Reveal email function
        function revealEmail(email, button, cost) {
            if (userCredits >= cost) {
                userCredits -= cost;
                button.parentElement.innerHTML = email + ` | Credits left: ${userCredits}`;
                alert(`Email revealed! ${userCredits} credits remaining.`);
            } else {
                alert('Not enough credits. Upgrade to reveal more emails.');
                window.open('plans.html', '_self');
            }
        }

        // AI Industry Search with OpenCorporates and DuckDuckGo Fallback
        async function searchAI() {
            const query = document.getElementById('aiInput').value.trim().toLowerCase().replace('stores', 'companies');
            const results = document.getElementById('aiResults');
            results.innerHTML = '<div class="loading">Searching...</div>';
            if (!query) {
                results.innerHTML = '<div class="result-item">Enter a query.</div>';
                return;
            }
            try {
                const ocApiUrl = `https://api.opencorporates.com/v0.4/companies/search?q=${encodeURIComponent(query)}&per_page=5`;
                const ocResponse = await fetch(ocApiUrl);
                if (!ocResponse.ok) {
                    throw new Error(`OpenCorporates error! Status: ${ocResponse.status}`);
                }
                const ocData = await ocResponse.json();
                results.innerHTML = '';
                if (!ocData.results || ocData.results.companies.length === 0) {
                    throw new Error('No companies from OpenCorporates');
                }
                ocData.results.companies.forEach(company => {
                    const name = company.company.name || 'N/A';
                    const url = company.company.company_number ? `https://opencorporates.com/companies/${company.company.jurisdiction_code}/${company.company.company_number}` : '#';
                    results.innerHTML += `<div class="result-item"><h3>${name}</h3><a href="${url}" target="_blank" class="btn">View Profile</a></div>`;
                });
            } catch (err) {
                console.error('OpenCorporates failed, falling back to DuckDuckGo:', err);
                try {
                    const ddApiUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent('list of ' + query + ' site:*.com -inurl:(signup | login)')}&format=json`;
                    const ddResponse = await fetch(ddApiUrl);
                    if (!ddResponse.ok) {
                        throw new Error(`DuckDuckGo error! Status: ${ddResponse.status}`);
                    }
                    const ddData = await ddResponse.json();
                    results.innerHTML = '';
                    if (!ddData.RelatedTopics || ddData.RelatedTopics.length === 0) {
                        results.innerHTML = '<div class="result-item">No companies found. Try a different query (e.g., adjust location or industry).</div>';
                    } else {
                        ddData.RelatedTopics.slice(0, 5).forEach(topic => {
                            const name = topic.Text || 'N/A';
                            const url = topic.FirstURL || '#';
                            results.innerHTML += `<div class="result-item"><h3>${name}</h3><a href="${url}" target="_blank" class="btn">View Profile</a></div>`;
                        });
                    }
                } catch (ddErr) {
                    results.innerHTML = '<div class="result-item">Error: Both APIs failed. Check console for details.</div>';
                    console.error('DuckDuckGo fallback failed:', ddErr);
                }
            }
        }

        // Import Records Search with Trade Map API
        let sortDirection = 1;
        function sortTable(columnIndex) {
            const table = document.querySelector('#importsResults table');
            const rows = Array.from(table.querySelectorAll('tr')).slice(1);
            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent;
                const bValue = b.cells[columnIndex].textContent;
                return aValue.localeCompare(bValue, undefined, { numeric: true }) * sortDirection;
            });
            rows.forEach(row => table.appendChild(row));
            sortDirection *= -1;
        }

        async function searchImports() {
            const query = document.getElementById('importsInput').value.toLowerCase().trim();
            const countryFilter = document.getElementById('countryFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;
            const liveToggle = document.getElementById('liveToggle').checked;
            const results = document.getElementById('importsResults');
            results.innerHTML = '<div class="loading">Searching...</div>';

            if (!query) {
                results.innerHTML = '<div class="result-item">Enter a company name.</div>';
                return;
            }

            if (liveToggle) {
                // Live Trade Map API call via proxy
                try {
                    const hsCodes = {
                        'coca-cola': '2202', // Beverages
                        'monsterenergy': '2202', // Energy drinks
                        'acme imports': '8471', // Machinery
                        'default': '9999' // Miscellaneous
                    };
                    const hsCode = hsCodes[query] || hsCodes['default'];
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    const apiUrl = `https://www.trademap.org/api.aspx?indicator=TRADE&reporter=USA&partner=ALL&year=2022-2023&product=${hsCode}&format=json`;
                    const response = await fetch(proxyUrl + encodeURIComponent(apiUrl));
                    if (!response.ok) {
                        throw new Error(`Trade Map API error! Status: ${response.status} - ${response.statusText}`);
                    }
                    const data = await response.json();

                    // Filter and format with enhanced details
                    results.innerHTML = `
                        <div class="summary-box">Trade Insights for ${query.toUpperCase()} | Last Updated: ${new Date().toLocaleDateString()} | <a href="plans.html" class="btn">Upgrade for Full Report</a></div>
                        <table class="result-table">
                            <tr>
                                <th onclick="sortTable(0)">Supplier</th>
                                <th onclick="sortTable(1)">Country</th>
                                <th onclick="sortTable(2)">Trade Value</th>
                                <th onclick="sortTable(3)">Year</th>
                                <th onclick="sortTable(4)">Product</th>
                                <th>Action</th>
                            </tr>
                    `;
                    if (data && data.length > 0) {
                        const filteredData = data.filter(item => {
                            const matchesCountry = !countryFilter || item.partner === countryFilter;
                            const matchesYear = !yearFilter || item.year === yearFilter;
                            return matchesCountry && matchesYear;
                        }).slice(0, 10);

                        if (filteredData.length > 0) {
                            filteredData.forEach(item => {
                                const supplier = item.partner_name || 'Unknown Supplier';
                                const country = item.partner || 'N/A';
                                const tradeValue = item.trade_value ? `$${Number(item.trade_value).toLocaleString()}` : 'N/A';
                                const year = item.year || 'N/A';
                                const product = item.product_description || 'Beverages';
                                results.innerHTML += `
                                    <tr>
                                        <td>${supplier}</td>
                                        <td>${country}</td>
                                        <td>${tradeValue}</td>
                                        <td>${year}</td>
                                        <td>${product}</td>
                                        <td><a href="#" class="btn premium">View Report (Premium)</a></td>
                                    </tr>
                                `;
                            });
                        } else {
                            results.innerHTML += '<tr><td colspan="6">No supplier records found with current filters.</td></tr>';
                        }
                    } else {
                        results.innerHTML += '<tr><td colspan="6">No data available for this company.</td></tr>';
                    }
                    results.innerHTML += '</table>';
                } catch (err) {
                    console.error('Trade Map API failed, falling back to mock:', err);
                    results.innerHTML = `<div class="error">API Error: ${err.message}. Using mock data.</div>`;
                    useMockImports(query, countryFilter, yearFilter, results);
                }
            } else {
                // Mock mode
                useMockImports(query, countryFilter, yearFilter, results);
            }
        }

        // Helper function for mock imports with enhanced design
        function useMockImports(query, countryFilter, yearFilter, results) {
            const mockSuppliers = {
                'acme imports': [
                    { supplier: 'Global Supply Co.', country: 'China', tradeValue: '$5000', year: '2023', product: 'Machinery Parts' },
                    { supplier: 'East Trade Ltd.', country: 'Vietnam', tradeValue: '$3000', year: '2022', product: 'Machinery Parts' }
                ],
                'coca-cola': [
                    { supplier: 'Beverage Logistics Inc.', country: 'Mexico', tradeValue: '$10000', year: '2023', product: 'Soft Drinks' },
                    { supplier: 'Sweet Water Suppliers', country: 'Brazil', tradeValue: '$7500', year: '2022', product: 'Soft Drinks' },
                    { supplier: 'Pacific Beverage Corp.', country: 'China', tradeValue: '$6000', year: '2023', product: 'Soft Drinks' }
                ],
                'monsterenergy': [
                    { supplier: 'Energy Pack Ltd.', country: 'Thailand', tradeValue: '$4000', year: '2023', product: 'Energy Drinks' },
                    { supplier: 'Asia Energy Import', country: 'India', tradeValue: '$2500', year: '2022', product: 'Energy Drinks' }
                ],
                'default': [
                    { supplier: 'Sample Supplier', country: 'USA', tradeValue: '$1000', year: '2023', product: 'Miscellaneous' }
                ]
            };

            const suppliers = mockSuppliers[query] || mockSuppliers['default'];
            results.innerHTML = `
                <div class="summary-box">Trade Insights for ${query.toUpperCase()} | Last Updated: ${new Date().toLocaleDateString()} | <a href="plans.html" class="btn">Upgrade for Full Report</a></div>
                <table class="result-table">
                    <tr>
                        <th onclick="sortTable(0)">Supplier</th>
                        <th onclick="sortTable(1)">Country</th>
                        <th onclick="sortTable(2)">Trade Value</th>
                        <th onclick="sortTable(3)">Year</th>
                        <th onclick="sortTable(4)">Product</th>
                        <th>Action</th>
                    </tr>
            `;
            const filteredSuppliers = suppliers.filter(supplier => {
                const matchesCountry = !countryFilter || supplier.country === countryFilter;
                const matchesYear = !yearFilter || supplier.year === yearFilter;
                return matchesCountry && matchesYear;
            });
            if (filteredSuppliers.length > 0) {
                filteredSuppliers.forEach(supplier => {
                    results.innerHTML += `
                        <tr>
                            <td>${supplier.supplier}</td>
                            <td>${supplier.country}</td>
                            <td>${supplier.tradeValue}</td>
                            <td>${supplier.year}</td>
                            <td>${supplier.product}</td>
                            <td><a href="#" class="btn premium">View Report (Premium)</a></td>
                        </tr>
                    `;
                });
            } else {
                results.innerHTML += '<tr><td colspan="6">No supplier records found with current filters.</td></tr>';
            }
            results.innerHTML += '</table>';
        }

        // Reveal email function
        function revealEmail(email, button, cost) {
            if (userCredits >= cost) {
                userCredits -= cost;
                button.parentElement.innerHTML = email + ` | Credits left: ${userCredits}`;
                alert(`Email revealed! ${userCredits} credits remaining.`);
            } else {
                alert('Not enough credits. Upgrade to reveal more emails.');
                window.open('plans.html', '_self');
            }
        }

        // Smooth scroll for CTAs
        document.querySelectorAll('a.btn, button.btn').forEach(btn => {
            if (btn.textContent.includes('Get Started') || btn.textContent.includes('Sign Up')) {
                btn.addEventListener('click', () => {
                    document.querySelector('section:last-of-type').scrollIntoView({ behavior: 'smooth' });
                });
            }
        });
    </script>
</body>
</html>