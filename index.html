<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NovaHunt - AI-Powered Lead Generation for B2B Success">
  <meta name="keywords" content="lead generation, B2B, AI, NovaHunt, business tools">
  <title>NovaHunt - AI Lead Generation</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f9fa; color: #333; line-height: 1.6; }
    .header { background: #2c3e50; color: white; padding: 20px; text-align: center; position: relative; }
    .header h1 { margin: 0; }
    .nav { margin: 20px 0; background: #34495e; padding: 10px; }
    .nav a { color: #ecf0f1; margin: 0 15px; text-decoration: none; font-weight: bold; transition: color 0.3s; }
    .nav a:hover { color: #3498db; }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .upgrade-section { background: #ecf0f1; padding: 20px; border-radius: 5px; margin-bottom: 20px; text-align: center; }
    .upgrade-btn { display: inline-block; padding: 12px 25px; background: #3498db; color: white; text-decoration: none; border-radius: 5px; margin: 5px; transition: background 0.3s; }
    .upgrade-btn:hover { background: #2980b9; }
    .feature { margin: 20px 0; padding: 15px; background: #fff; border: 1px solid #ddd; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; }
    .feature.hidden { display: none; }
    .login-form { margin: 20px 0; background: #fff; padding: 20px; border-radius: 5px; border: 1px solid #ddd; max-width: 400px; }
    .login-form input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    .login-form button { width: 100%; padding: 10px; background: #2ecc71; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background 0.3s; }
    .login-form button:hover { background: #27ae60; }
    .logout-btn { padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background 0.3s; margin-left: 10px; }
    .logout-btn:hover { background: #c0392b; }
    #credits { font-weight: bold; color: #2ecc71; margin-top: 10px; }
    .search-input { padding: 10px; width: 100%; max-width: 400px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; }
    .import-input { padding: 10px; width: 100%; max-width: 400px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; }
    .map-placeholder { height: 300px; background: #ecf0f1; border: 1px solid #ddd; border-radius: 5px; text-align: center; line-height: 300px; color: #7f8c8d; margin-top: 10px; }
    .results { margin-top: 10px; padding: 10px; background: #f1f1f1; border-radius: 5px; }
    .error { color: #e74c3c; font-size: 0.9em; margin-top: 5px; display: none; }
    .premium-message { color: #e74c3c; font-style: italic; }
    .loading { text-align: center; color: #7f8c8d; }
    footer { text-align: center; padding: 10px; color: #7f8c8d; margin-top: 20px; background: #34495e; color: #ecf0f1; }
    footer a { color: #3498db; text-decoration: none; }
    footer a:hover { color: #2980b9; }
  </style>
  <!-- External Libraries -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY" defer></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyArKU9HQx7An_PhRM2jlzIHVnLp1EmISlA",
      authDomain: "novahunt-web-app-v2.firebaseapp.com",
      projectId: "novahunt-web-app-v2",
      storageBucket: "novahunt-web-app-v2.firebasestorage.app",
      messagingSenderId: "915754711081",
      appId: "1:915754711081:web:f563cc734c901812954438"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // Utility Functions
    function showLoading(elementId) {
      $(`#${elementId}`).html('<div class="loading">Loading...</div>');
    }

    // Login Function
    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('login-error');
      errorDiv.style.display = 'none';
      showLoading('login-section');
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          console.log("Login successful for:", email);
          updateUI(userCredential.user);
        })
        .catch((error) => {
          console.error("Login error:", error.message);
          errorDiv.textContent = `Error: ${error.message}`;
          errorDiv.style.display = 'block';
          $('#login-section').html($('#login-section').data('html'));
        })
        .finally(() => $('#login-section').data('html', $('#login-section').html()));
    }

    // Logout Function
    function logout() {
      showLoading('logout-btn');
      auth.signOut().then(() => {
        console.log("Logout successful");
        updateUI(null);
        document.getElementById('search-result').innerHTML = '';
        document.getElementById('import-result').innerHTML = '';
      }).catch((error) => console.error("Logout error:", error.message));
    }

    // Update UI Based on Auth State
    function updateUI(user) {
      const loginSection = document.getElementById('login-section');
      const logoutBtn = document.getElementById('logout-btn');
      const premiumFeatures = document.querySelectorAll('.premium-feature');
      if (user) {
        loginSection.style.display = 'none';
        logoutBtn.style.display = 'inline-block';
        checkPremiumFeatures();
        loadUserCredits();
        premiumFeatures.forEach(feature => feature.classList.remove('hidden'));
      } else {
        loginSection.style.display = 'block';
        logoutBtn.style.display = 'none';
        premiumFeatures.forEach(feature => feature.classList.add('hidden'));
        document.getElementById('credits').innerText = 'Credits: 5 remaining this month';
        document.getElementById('search-result').innerHTML = '';
        document.getElementById('import-result').innerHTML = '';
      }
    }

    // Check Premium Features
    function checkPremiumFeatures() {
      const userId = auth.currentUser ? auth.currentUser.uid : null;
      if (userId) {
        db.collection('users').doc(userId).get().then((doc) => {
          if (doc.exists && doc.data().isPremium) {
            document.getElementById('hunt-leads').classList.remove('hidden');
            document.getElementById('hunt-imports').classList.remove('hidden');
          } else {
            document.getElementById('hunt-leads').classList.add('hidden');
            document.getElementById('hunt-imports').classList.add('hidden');
          }
        }).catch((error) => console.error("Error checking subscription:", error));
      }
    }

    // Load User Credits
    function loadUserCredits() {
      const userId = auth.currentUser ? auth.currentUser.uid : null;
      if (userId) {
        db.collection('users').doc(userId).get().then((doc) => {
          if (doc.exists) {
            const data = doc.data();
            let userCredits = 5; // Default free tier
            if (data.isPremium && data.plan === 'enterprise') {
              userCredits = data.monthlyCredits.credits || 250;
            }
            document.getElementById('credits').innerText = `Credits: ${userCredits} remaining this month`;
          } else {
            document.getElementById('credits').innerText = 'Credits: 5 remaining this month';
          }
        }).catch((error) => console.error("Error loading credits:", error));
      }
    }

    // Search Leads (Mock API Call)
    function searchLeads() {
      const query = document.getElementById('search-input').value;
      const resultDiv = document.getElementById('search-result');
      showLoading('search-result');
      if (auth.currentUser) {
        db.collection('users').doc(auth.currentUser.uid).get().then((doc) => {
          if (doc.exists && doc.data().isPremium) {
            // Mock API call (replace with real endpoint)
            setTimeout(() => {
              resultDiv.innerHTML = `<div class="results">Found leads for ${query}: <em>(Premium feature, 5 leads retrieved)</em></div>`;
            }, 1000);
          } else {
            resultDiv.innerHTML = '<p class="premium-message">This feature is for Business/Enterprise users. <a href="https://buy.stripe.com/test_7kg00000000000000" class="upgrade-btn">Upgrade Now</a></p>';
          }
        });
      } else {
        resultDiv.innerHTML = '<p>Please log in to search leads.</p>';
      }
    }

    // Import Leads (Mock with Map)
    function importLeads() {
      const query = document.getElementById('import-input').value;
      const resultDiv = document.getElementById('import-result');
      showLoading('import-result');
      if (auth.currentUser) {
        db.collection('users').doc(auth.currentUser.uid).get().then((doc) => {
          if (doc.exists && doc.data().isPremium) {
            // Mock import with map (replace with Google Maps API)
            setTimeout(() => {
              resultDiv.innerHTML = `<div class="results">Imported ${query}: <em>(Premium feature, map data loaded)</em></div><div class="map-placeholder">Map Loading Placeholder (Add Google Maps API here)</div>`;
            }, 1000);
          } else {
            resultDiv.innerHTML = '<p class="premium-message">This feature is for Business/Enterprise users. <a href="https://buy.stripe.com/test_7kg00000000000000" class="upgrade-btn">Upgrade Now</a></p>';
          }
        });
      } else {
        resultDiv.innerHTML = '<p>Please log in to import leads.</p>';
      }
    }

    // Initialize Map (Stub - Add API Key)
    function initMap() {
      // Replace with your Google Maps API key and coordinates
      // const map = new google.maps.Map(document.getElementById('map'), {
      //   center: { lat: 37.7749, lng: -122.4194 },
      //   zoom: 12,
      // });
    }
    window.initMap = initMap;

    // Auth State Listener
    auth.onAuthStateChanged((user) => {
      console.log("Auth state changed, user:", user ? "logged in" : "not logged in");
      updateUI(user);
    });

    // Page Load
    window.onload = () => {
      console.log("Page loaded, initializing UI");
      $('#login-section').data('html', $('#login-section').html());
    };
  </script>
</head>
<body>
  <div class="header">
    <h1>🥷 NovaHunt</h1>
    <p>AI-Powered Lead Generation That Hunts for You</p>
  </div>
  <div class="nav">
    <a href="#home">Home</a>
    <a href="#features">Features</a>
    <a href="#pricing">Pricing</a>
    <a href="#contact">Contact</a>
    <a href="#support">Support</a>
    <a href="#login">Log In</a>
  </div>
  <div class="container">
    <div class="upgrade-section">
      <p>Redefine B2B success with cutting-edge AI precision. Subscribe to:</p>
      <a href="https://buy.stripe.com/test_3cI7sLbl5dgI1ma5TL00002" class="upgrade-btn">Pro ($29/month)</a>
      <a href="https://buy.stripe.com/test_aFacN59cX0tWgh4ci900001" class="upgrade-btn">Business ($59/month)</a>
      <a href="https://buy.stripe.com/test_fZu5kD88T3G85Cqbe500000" class="upgrade-btn">Enterprise ($99/month)</a>
      <p>Free credits • No credit card required</p>
    </div>

    <div id="login-section" class="login-form">
      <h3>Log In to NovaHunt</h3>
      <input type="email" id="email" placeholder="Email (e.g., test11@novahunt.ai)" required>
      <input type="password" id="password" placeholder="Password" required>
      <button onclick="login()">Log In</button>
      <div id="login-error" class="error"></div>
    </div>
    <button id="logout-btn" style="display: none;" onclick="logout()">Log Out</button>

    <h2>Search for Leads</h2>
    <p>Unleash NovaHunt’s AI-powered lead discovery across multiple modes.</p>
    <input type="text" id="search-input" class="search-input" placeholder="Enter company name or domain (e.g., coca-cola.com)">
    <button onclick="searchLeads()">Search Leads</button>
    <div id="hunt-leads" class="feature premium-feature hidden">
      <p>Lead Search Results: <span id="search-result"></span></p>
    </div>

    <h2>Import Leads</h2>
    <p>Import leads with integrated map visualization.</p>
    <input type="text" id="import-input" class="import-input" placeholder="Enter import data (e.g., acme imports)">
    <button onclick="importLeads()">Import Leads</button>
    <div id="hunt-imports" class="feature premium-feature hidden">
      <p>Import Results: <span id="import-result"></span></p>
      <!-- Map will load here with Google Maps API -->
    </div>

    <p id="credits">Credits: 5 remaining this month</p>

    <h2>Reports</h2>
    <p>Generate detailed lead reports (premium feature).</p>
    <div id="reports" class="feature premium-feature hidden">
      <p>Reports Content: <em>Download PDF report here (placeholder)</em></p>
    </div>
  </div>
  <footer>
    <p>&copy; 2025 NovaHunt. All rights reserved. | <a href="#privacy">Privacy Policy</a> | <a href="#terms">Terms of Service</a> | <a href="#support">Support</a></p>
  </footer>
</body>
</html>